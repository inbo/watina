<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Identify and evaluate XG3 series per location — eval_xg3_series • watina</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Identify and evaluate XG3 series per location — eval_xg3_series" />
<meta property="og:description" content="For a dataset as returned by get_xg3,
determine for each location the available multi-year XG3 series
and calculate summary statistics for each series.
Note that 'years' in this context always refers to hydroyears." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">watina</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/v010_getstarted.html">Getting started: connecting and selecting locations</a>
    </li>
    <li>
      <a href="../articles/v110_xg3.html">Using XG3 values to characterize and select locations</a>
    </li>
    <li>
      <a href="../articles/v210_chem.html">Using hydrochemical data to characterize and select locations</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/inbo/watina">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Identify and evaluate XG3 series per location</h1>
    <small class="dont-index">Source: <a href='https://github.com/inbo/watina/blob/master/R/eval.R'><code>R/eval.R</code></a></small>
    <div class="hidden name"><code>eval_xg3_series.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>For a dataset as returned by <code><a href='get_xg3.html'>get_xg3</a></code>,
determine for each location the available multi-year XG3 series
and calculate summary statistics for each series.
Note that 'years' in this context always refers to hydroyears.</p>
    </div>

    <pre class="usage"><span class='fu'>eval_xg3_series</span>(<span class='no'>data</span>, <span class='kw'>xg3_type</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"L"</span>, <span class='st'>"H"</span>, <span class='st'>"V"</span>), <span class='no'>max_gap</span>, <span class='no'>min_dur</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>An object returned by <code><a href='get_xg3.html'>get_xg3</a></code>.</p></td>
    </tr>
    <tr>
      <th>xg3_type</th>
      <td><p>Character vector of length 1, 2 or 3.
Defines the types of XG3 which are taken from <code>data</code>.
Specifies the 'X' in 'XG3': either <code>"L"</code>, <code>"H"</code> and/or <code>"V"</code>.
Defaults to <code>"L"</code>.</p></td>
    </tr>
    <tr>
      <th>max_gap</th>
      <td><p>A positive integer (can be zero).
It is part of what the user defines as 'an XG3 series':
the maximum allowed time gap between two consecutive
XG3 values in a series, expressed as the number of years without XG3 value.</p></td>
    </tr>
    <tr>
      <th>min_dur</th>
      <td><p>A strictly positive integer.
It is part of what the user defines as 'an XG3 series':
the minimum required duration of an XG3 series,
i.e. the time (expressed as years)
from the first to the last year of the XG3 series.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A tibble with variables:</p><ul>
<li><p><code>loc_code</code>: see <code><a href='get_locs.html'>get_locs</a></code></p></li>
<li><p><code>xg3_variable</code>: character; see Details</p></li>
<li><p><code>series</code>: series ID, unique within <code>loc_code</code></p></li>
<li><p><code>ser_length</code>: series duration (as years), i.e. from first to
last year</p></li>
<li><p><code>ser_nryears</code>: number of years in the series for which the
XG3 variable is available</p></li>
<li><p><code>ser_rel_nryears</code>: the fraction <code>ser_nryears / ser_length</code>,</p></li>
<li><p><code>ser_firstyear</code>: first year in the series with XG3 variable</p></li>
<li><p><code>ser_lastyear</code>: last year in the series with XG3 variable</p></li>
<li><p><code>ser_pval_uniform</code>: p-value of an exact, one-sample two-sided
Kolmogorov-Smirnov test for the discrete uniform distribution of the member
years within the XG3 series.
The smaller the p-value,
the less uniform the member years are spread within a series.
A perfectly uniform spread results in a p-value of 1.
Only with larger values of <code>max_gap</code> this p-value can get low.</p></li>
<li><p>Summary statistics based on the XG3 values,
i.e. excluding the 'combined' series:</p><ul>
<li><p><code>ser_mean</code>: mean XG3 value of the series, as meters.</p></li>
<li><p><code>ser_sd</code>: standard deviation of the XG3 values of the series
  (an estimate of the superpopulation's standard deviation).
  As meters.</p></li>
<li><p><code>ser_se_6y</code>: estimated standard error of the mean XG3 for a
  six-year period, applying finite population correction
  (i.e. for design-based estimation of this mean).
  Hence, <code>ser_se_6y</code> is zero when a series has no missing years.
  As meters.
  For series shorter than six years, the estimation is still regarding a
  six-year period, assuming the same sampling variance as in the short
  series.</p></li>
<li><p><code>ser_rel_sd_lcl</code>: relative standard deviation of XG3 values,
  i.e. <code>ser_sd / ser_mean</code>.
  <strong>This value is only calculated for <code>vert_crs = "local"</code>.</strong></p></li>
<li><p><code>ser_rel_se_6y_lcl</code>:
  relative standard error of the mean XG3 for a
  six-year period,
  i.e. <code>ser_se_6y / ser_mean</code>.
  <strong>This value is only calculated for <code>vert_crs = "local"</code>.</strong></p></li>
</ul></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>An XG3 series is a location-specific, multi-year series of
LG3, HG3 and/or VG3 variables
and is user-restricted by <code>max_gap</code> (maximum allowed number of empty
years between 'series member' years) and
<code>min_dur</code> (minimum required length of the series).
Further, given a dataset of XG3 values per year and location, XG3 series are
always constructed <em>as long as possible</em> given the aforementioned
restrictions.
For one location and XG3 variable, more than one such XG3 series may be
available, which implies that those XG3 series are separated by more years
than the
value of <code>max_gap</code>.</p>
<p>The function returns summary statistics for the XG3 series that are available
in the dataset.
The XG3 series of each site
are numbered as 'prefix_series1', 'prefix_series2' with the
prefix being the value of <code>xg3_variable</code>.</p>
<p>The column <code>xg3_variable</code> in the resulting tibble
stands for the XG3 type + the vertical CRS (see <code><a href='get_xg3.html'>get_xg3</a></code>)
to which a series belongs.
<code>xg3_variable</code> is restricted to the requested XG3 types (LG3, HG3
and/or VG3) via the <code>xg3_type</code> argument, but adds an extra level
"<code>combined</code>" whenever the combination of <code>data</code> (which may have
both
vertical CRSes) and <code>xg3_type</code> implies more than one requested
variable.
This 'combined' level defines an XG3 series as an XG3 series where each
'member' year has <strong>all</strong> selected XG3 variables available.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='extract_xg3_series.html'>extract_xg3_series</a></code></p>
<p>Other functions to evaluate locations: <code><a href='eval_chem.html'>eval_chem</a></code>,
  <code><a href='eval_xg3_avail.html'>eval_xg3_avail</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='no'>watina</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='connect_watina.html'>connect_watina</a></span>()
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>dplyr</span>)
<span class='no'>mylocs</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='get_locs.html'>get_locs</a></span>(<span class='no'>watina</span>, <span class='kw'>area_codes</span> <span class='kw'>=</span> <span class='st'>"KAL"</span>)
<span class='no'>mydata</span> <span class='kw'>&lt;-</span>
 <span class='no'>mylocs</span> <span class='kw'>%&gt;%</span>
 <span class='fu'><a href='get_xg3.html'>get_xg3</a></span>(<span class='no'>watina</span>, <span class='fl'>1900</span>)
<span class='no'>mydata</span>
<span class='no'>mydata</span> <span class='kw'>%&gt;%</span>
  <span class='fu'>eval_xg3_series</span>(<span class='kw'>xg3_type</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"L"</span>, <span class='st'>"V"</span>),
                  <span class='kw'>max_gap</span> <span class='kw'>=</span> <span class='fl'>2</span>,
                  <span class='kw'>min_dur</span> <span class='kw'>=</span> <span class='fl'>5</span>)
<span class='co'># Disconnect:</span>
<span class='kw pkg'>DBI</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/DBI/man/dbDisconnect.html'>dbDisconnect</a></span>(<span class='no'>watina</span>)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Floris Vanderhaeghe.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


