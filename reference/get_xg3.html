<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get XG3 values from the database — get_xg3 • watina</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Get XG3 values from the database — get_xg3" />
<meta property="og:description" content="Returns XG3 values from the Watina database,
either as a lazy object or as a
local tibble.
The values must belong to selected locations
and
to a specified timeframe." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">watina</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/v010_getstarted.html">Getting started: connecting and selecting locations</a>
    </li>
    <li>
      <a href="../articles/v110_xg3.html">Using XG3 values to characterize and select locations</a>
    </li>
    <li>
      <a href="../articles/v210_chem.html">Using hydrochemical data to characterize and select locations</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/inbo/watina/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get XG3 values from the database</h1>
    <small class="dont-index">Source: <a href='https://github.com/inbo/watina/blob/master/R/get.R'><code>R/get.R</code></a></small>
    <div class="hidden name"><code>get_xg3.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Returns XG3 values from the <em>Watina</em> database,
either as a lazy object or as a
local tibble.
The values must belong to selected locations
and
to a specified timeframe.</p>
    </div>

    <pre class="usage"><span class='fu'>get_xg3</span><span class='op'>(</span>
  <span class='va'>locs</span>,
  <span class='va'>con</span>,
  <span class='va'>startyear</span>,
  endyear <span class='op'>=</span> <span class='fu'>year</span><span class='op'>(</span><span class='fu'>now</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-</span> <span class='fl'>1</span>,
  vert_crs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"local"</span>, <span class='st'>"ostend"</span>, <span class='st'>"both"</span><span class='op'>)</span>,
  truncated <span class='op'>=</span> <span class='cn'>TRUE</span>,
  with_estimated <span class='op'>=</span> <span class='cn'>TRUE</span>,
  collect <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>locs</th>
      <td><p>A <code>tbl_lazy</code> object or a dataframe, with at least a column
<code>loc_code</code> that defines the locations for which values are to be
returned.
Typically, this will be the object returned by <code><a href='get_locs.html'>get_locs</a></code>.</p></td>
    </tr>
    <tr>
      <th>con</th>
      <td><p>A <code>DBIConnection</code> object to Watina.
See <code><a href='connect_watina.html'>connect_watina</a></code> to generate one.</p></td>
    </tr>
    <tr>
      <th>startyear</th>
      <td><p>First hydroyear of the timeframe.</p></td>
    </tr>
    <tr>
      <th>endyear</th>
      <td><p>Last hydroyear of the timeframe.</p></td>
    </tr>
    <tr>
      <th>vert_crs</th>
      <td><p>A string, defining the 1-dimensional vertical coordinate
reference system (CRS) of the XG3 water levels.
Either <code>"local"</code> (the default, i.e. returned values are relative to
soil surface level, with positive values = above soil surface),
or <code>"ostend"</code> (values are from the CRS
<a href='http://crs.bkg.bund.de/crseu/crs/eu-description.php?crs_id=Y0JFX09PU1QrJTJGK1VOQ09S'>Ostend height</a>
(EPSG <a href='https://epsg.io/5710'>5710</a>),
also known as 'TAW' or 'DNG'),
or <code>"both"</code>, where the values for both CRS options are returned.
The units are always meters.</p></td>
    </tr>
    <tr>
      <th>truncated</th>
      <td><p>Logical.
If <code>TRUE</code> (the default), the XG3 values are calculated after having set
the underlying water level measurements that are above soil surface level
to the soil surface level itself
(which is zero in the case of the local CRS).</p></td>
    </tr>
    <tr>
      <th>with_estimated</th>
      <td><p>Logical.
If <code>TRUE</code> (the default), the XG3 values calculations also use estimated
(i.e. non-measured) water level data that are available in the database.</p></td>
    </tr>
    <tr>
      <th>collect</th>
      <td><p>Should the data be retrieved as a local tibble?
If <code>FALSE</code> (the default), a <code>tbl_lazy</code> object is returned
(lazy query).
Hence the result can be further built upon before retrieving data with
<code><a href='https://dplyr.tidyverse.org/reference/compute.html'>collect()</a></code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>By default, a <code>tbl_lazy</code> object.
With <code>collect = TRUE</code>,
a local <code><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></code> is returned.</p>
<p>(TO BE ADDED: Explanation on the variable names of the returned object)</p>
<p>The suffix of the XG3 variables is either "<code>_lcl</code>" for
<code>vert_crs = "local"</code> or
"<code>_ost</code>" for <code>vert_crs = "ostend"</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The timeframe is a selection interval between
a given first and last hydroyear.</p>
<p>Note: the arguments <code>truncated</code> and <code>with_estimated</code> are currently
not used.
Currently, non-truncated values are returned, with usage of estimated values.</p>
<p>(TO BE ADDED: What are XG3 values? What is a hydroyear?
Why truncate, and why truncate by default?
When to choose which <code>vert_crs</code>?)</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other functions to query the database: 
<code><a href='get_chem.html'>get_chem</a>()</code>,
<code><a href='get_locs.html'>get_locs</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='va'>watina</span> <span class='op'>&lt;-</span> <span class='fu'><a href='connect_watina.html'>connect_watina</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>
<span class='va'>mylocs</span> <span class='op'>&lt;-</span> <span class='fu'><a href='get_locs.html'>get_locs</a></span><span class='op'>(</span><span class='va'>watina</span>, area_codes <span class='op'>=</span> <span class='st'>"KAL"</span><span class='op'>)</span>
<span class='va'>mylocs</span> <span class='op'>%&gt;%</span> <span class='fu'>get_xg3</span><span class='op'>(</span><span class='va'>watina</span>, <span class='fl'>2010</span><span class='op'>)</span>
<span class='va'>mylocs</span> <span class='op'>%&gt;%</span> <span class='fu'>get_xg3</span><span class='op'>(</span><span class='va'>watina</span>, <span class='fl'>2010</span>, collect <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>mylocs</span> <span class='op'>%&gt;%</span> <span class='fu'>get_xg3</span><span class='op'>(</span><span class='va'>watina</span>, <span class='fl'>2010</span>, vert_crs <span class='op'>=</span> <span class='st'>"ostend"</span><span class='op'>)</span>

<span class='co'># joining results to mylocs:</span>
<span class='va'>mylocs</span> <span class='op'>%&gt;%</span>
  <span class='fu'>get_xg3</span><span class='op'>(</span><span class='va'>watina</span>, <span class='fl'>2010</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join</a></span><span class='op'>(</span><span class='va'>mylocs</span> <span class='op'>%&gt;%</span>
            <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>loc_wid</span><span class='op'>)</span>,
            <span class='va'>.</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='va'>collect</span>

<span class='co'># Disconnect:</span>
<span class='fu'>DBI</span><span class='fu'>::</span><span class='fu'><a href='https://dbi.r-dbi.org/reference/dbDisconnect.html'>dbDisconnect</a></span><span class='op'>(</span><span class='va'>watina</span><span class='op'>)</span>
<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Floris Vanderhaeghe.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


